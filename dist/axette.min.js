var axette=function(){function t(){this.onAjax=[],this.onInit=[]}return Object.entries||(Object.entries=function(t){for(var n=Object.keys(t),e=n.length,o=new Array(e);e--;)o[e]=[n[e],t[n[e]]];return o}),t.prototype.addInitHook=function(t){return this.addHook("onInit",t)},t.prototype.addAjaxHook=function(t){return this.addHook("onAjax",t)},t.prototype.addHook=function(t,n){switch(t){case"onAjax":return this.onAjax.push(n),n;case"onInit":return this.onInit.push(n),n;default:return this[t]instanceof Array?(Array.prototype.push.call(this[t],n),n):null}},{init:function(t){t||(t="ajax");var n=document.querySelectorAll("a."+String(t));n&&n.forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),axette.run(t.target.href)}))}));var e=document.querySelectorAll("form."+String(t));e&&e.forEach((function(t){t instanceof HTMLFormElement&&t.addEventListener("submit",(function(n){n.preventDefault();var e=new FormData(t),o=new URLSearchParams(String(e)).toString();"post"===t.method.toLowerCase()?axette.run(t.action,o,"application/x-www-form-urlencoded").catch((function(t){})):axette.run(String(t.action)+String(o)).catch((function(t){}))}))})),axette.hooks.onInit.forEach((function(t){t.fn instanceof Function&&t.fn(t.args)}))},run:async function(t,n=null,e="application/json"){var o=await fetch(t,{method:n?"POST":"GET",headers:{"X-Requested-With":"XMLHttpRequest",...n&&{"Content-Type":e}},...n&&{body:n}}),r=await o.json(),i=null!==r.snippets&&void 0!==r.snippets?r.snippets:[],a=null!==r.redirect&&void 0!==r.redirect?r.redirect:"";""!==a&&window.location.replace(a),Object.entries(i).forEach((function([t,n]){var e=document.getElementById(t);e&&(e.innerHTML=n)})),axette.hooks.onAjax.forEach((function(t){t.fn instanceof Function&&t.fn(...t.args)})),axette.init()},hooks:t(),on:function(t,n,e){return axette.hooks.addHook(t,{fn:n,args:e})},onInit:function(t,n){axette.on("onInit",t,n)},onAjax:function(t,n){axette.on("onAjax",t,n)},fixURL:function(){var t=window.location.toString(),n=t.indexOf("_fid=");if(-1!==n){var e=t.substr(0,n)+t.substr(n+10);"?"!==e.substr(e.length-1)&&"&"!==e.substr(e.length-1)||(e=e.substr(0,e.length-1)),window.history.replaceState("",document.title,e)}}}}();